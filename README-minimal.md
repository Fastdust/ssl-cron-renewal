# Минимальное обновление SSL сертификатов

Минималистичный cron-job для автоматического обновления SSL сертификатов Let's Encrypt.

## Файлы

- `cron-job.sh` - Основной скрипт (54 строки)
- `crontab.example` - Пример настройки cron
- `.gitignore` - Игнорируемые файлы

## Быстрая установка

```bash
# 1. Копировать скрипт
sudo cp cron-job.sh /opt/scripts/
sudo chmod +x /opt/scripts/cron-job.sh

# 2. Тестирование
sudo /opt/scripts/cron-job.sh

# 3. Добавить в cron
sudo crontab -e
# Добавить строку: 0 3 1 */3 * /opt/scripts/cron-job.sh
```

## Что делает скрипт

1. Проверяет права root
2. Открывает порт 80 временно (если ufw активен)
3. Обновляет SSL сертификаты через `certbot renew --nginx`
4. Перезагружает nginx
5. Закрывает порт 80 обратно
6. Записывает результат в лог `/var/log/ssl-renewal.log`

## Требования

- Ubuntu/Debian VPS
- nginx
- certbot с nginx плагином
- ufw (опционально, для безопасности)
- Существующие SSL сертификаты

## Расписание

**По умолчанию:** каждые 3 месяца (1 число в 3:00 AM)

Это оптимально для Let's Encrypt сертификатов (срок действия 90 дней).

## Лог

Все операции записываются в `/var/log/ssl-renewal.log`

```bash
# Просмотр логов
sudo tail -f /var/log/ssl-renewal.log
```

## Сравнение с полной версией

| Параметр | Полная версия | Минимальная |
|----------|---------------|-------------|
| Размер скрипта | 215 строк | 54 строки |
| Проверки системы | Подробные | Только root |
| Обработка ошибок | Расширенная | Базовая |
| Fallback режимы | Standalone | Только nginx |
| Управление портами | ufw integration | Умное управление |

## Автор

Fastdust
