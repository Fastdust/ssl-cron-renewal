# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

–ü—Ä–æ—Å—Ç–æ–π cron-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ Let's Encrypt.

## –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

- `cron-job.sh` - –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (55 —Å—Ç—Ä–æ–∫ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ)
- `crontab.example` - –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ cron –Ω–∞ —Ä—É—Å—Å–∫–æ–º  
- `.gitignore` - –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
- `README-—Ä—É—Å—Å–∫–∏–π.md` - –î–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é –ø–∞–ø–∫—É
sudo cp cron-job.sh /opt/scripts/
sudo chmod +x /opt/scripts/cron-job.sh

# 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞
sudo /opt/scripts/cron-job.sh

# 3. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ –≤ cron
sudo crontab -e
# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É: 0 3 1 */3 * /opt/scripts/cron-job.sh
```

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ root** - —Å–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. **–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç 80 –≤—Ä–µ–º–µ–Ω–Ω–æ** (–µ—Å–ª–∏ ufw –∞–∫—Ç–∏–≤–µ–Ω) - –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Let's Encrypt
3. **–û–±–Ω–æ–≤–ª—è–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** —á–µ—Ä–µ–∑ `certbot renew --nginx` 
4. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç nginx** - –ø—Ä–∏–º–µ–Ω—è–µ—Ç –Ω–æ–≤—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
5. **–ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç 80** –æ–±—Ä–∞—Ç–Ω–æ - –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
6. **–ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –≤ –ª–æ–≥** `/var/log/ssl-renewal.log` —Å –º–µ—Ç–∫–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:** Ubuntu/Debian VPS
- **–í–µ–±-—Å–µ—Ä–≤–µ—Ä:** nginx 
- **SSL –∫–ª–∏–µ–Ω—Ç:** certbot —Å nginx –ø–ª–∞–≥–∏–Ω–æ–º
- **–§–∞–π—Ä–≤–æ–ª:** ufw (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:** –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ—Ç Let's Encrypt

## –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –∫–∞–∂–¥—ã–µ 3 –º–µ—Å—è—Ü–∞, 1-–≥–æ —á–∏—Å–ª–∞ –≤ 3:00 –Ω–æ—á–∏

–≠—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ Let's Encrypt (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 90 –¥–Ω–µ–π).

**–ü—Ä–∏–º–µ—Ä—ã –¥—Ä—É–≥–∏—Ö —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π:**
- –ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü: `0 3 1 * *`
- –ö–∞–∂–¥—ã–µ 2 –Ω–µ–¥–µ–ª–∏: `0 3 */14 * *`
- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: `*/5 * * * *` (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

## –†–∞–±–æ—Ç–∞ —Å –ª–æ–≥–∞–º–∏

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `/var/log/ssl-renewal.log`

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π
sudo tail /var/log/ssl-renewal.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo tail -f /var/log/ssl-renewal.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤
sudo cat /var/log/ssl-renewal.log
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ cron –∑–∞–¥–∞–Ω–∏—è–º–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π
sudo crontab -l

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π
sudo crontab -e

# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–¥–∞–Ω–∏–π (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
sudo crontab -r

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–ª—É–∂–±—ã cron
sudo systemctl status cron
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –æ—Ç –∏–º–µ–Ω–∏ root"
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sudo` –ø—Ä–∏ —Ä—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –∏–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ cron –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç root

### –ü—Ä–æ–±–ª–µ–º–∞: "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–∏–ª–æ—Å—å –Ω–µ—É–¥–∞—á–µ–π"
**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ nginx: `sudo systemctl status nginx`
2. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `sudo nginx -t`
3. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–∞ –∏–∑–≤–Ω–µ
4. –ù–∞–ª–∏—á–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤: `sudo certbot certificates`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç 80 –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è/–∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
**–ü—Ä–∏—á–∏–Ω–∞:** ufw –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
**–†–µ—à–µ–Ω–∏–µ:** `sudo ufw enable` –∏–ª–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø–æ–ª–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è |
|----------------|---------------|-------------------|
| –†–∞–∑–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ | 215 —Å—Ç—Ä–æ–∫ | 55 —Å—Ç—Ä–æ–∫ |
| –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ | –ê–Ω–≥–ª–∏–π—Å–∫–∏–π | **–†—É—Å—Å–∫–∏–π** |
| –ü—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã | –ü–æ–¥—Ä–æ–±–Ω—ã–µ | –¢–æ–ª—å–∫–æ root |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è | –ë–∞–∑–æ–≤–∞—è |
| Fallback —Ä–µ–∂–∏–º—ã | Standalone | –¢–æ–ª—å–∫–æ nginx |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞–º–∏ | ufw –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | –£–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ | –ü—Ä–æ—Å—Ç–æ–µ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ |

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- üìù **–ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –≤—Å–µ –æ—à–∏–±–∫–∏ –∏ –ª–æ–≥–∏ –ø–æ–Ω—è—Ç–Ω—ã
- üõ†Ô∏è **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –æ—Ç–ª–∞–¥–∫–∏** - –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É
- üìö **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ —Ä–µ—à–µ–Ω–∏–π

## –ê–≤—Ç–æ—Ä

**Fastdust** - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

> **–°–æ–≤–µ—Ç:** –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ cron!
> 
> **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫.
